z1.prop <- prop.test(x, n, alternative="one.sided", correct=FALSE)
z1.prop <- prop.test(x, n, alternative="less", correct=FALSE)
z1.prop$p.value
## Calculate the power
library(pwr)
pwr.chisq.test(w=0.3, N=400, df=3, sig.level=0.05)
## Determine the sample size required for power of 0.8
pwr.chisq.test(w=0.3, df=3, sig.level=0.05, power=0.8)
## Calculate the power
pwr.chisq.test(w=0.1, N=200, df=3, sig.level=0.05)
## Determine the sample size required for power of 0.8
pwr.chisq.test(w=0.1, df=3, sig.level=0.05, power=0.8)
## Calculate the power
pwr.chisq.test(w=0.1, N=200, df=3, sig.level=0.05)
## Determine the sample size required for power of 0.8
pwr.chisq.test(w=0.1, df=3, sig.level=0.05, power=0.8)
## Calculate the power
pwr.p.test(h=-0.2, n=100, sig.level=0.05, alternative="less")
## Determine the sample size required for power of 0.8
pwr.p.test(h=-0.2, sig.level=0.05, power=0.8, alternative="less")
#starting to look at pipelines
library(tidyverse)
salary_games_info <- read_csv('Lect2data.csv')
head(salary_games_info)
##############################################################
##############################################################
################### Ceci n'est pas une pipe ##################
##############################################################
##############################################################
salary_games_info %>% head()
salary_games_info %>% head() %>% tail(3)
tail(head(salary_games_info), 3)
salary_small_save <- salary_games_info %>% head() %>% tail(3)
##############################################################
##############################################################
######################## SUMMARIZE ###########################
##############################################################
##############################################################
salary_games_info %>%
summarize(count=n())
salary_games_info %>%
summarize(average_salary=mean(salary))
salary_games_info %>% summary()
salary_games_info %>%
summarize(average_salary=mean(salary)) %>% is_tibble()
salary_games_info %>% summary() %>% is_tibble()
##############################################################
##############################################################
########################## FILTER ############################
##############################################################
##############################################################
salary_games_info %>% filter(yearID > 1986 & yearID <= 2000)
salary_games_info %>% filter(yearID > 1986 & yearID <= 2000) %>% tail()
##############################################################
##############################################################
######################### ARRANGE ############################
##############################################################
##############################################################
salary_games_info %>% filter(yearID > 1986 & yearID <= 2000) %>% arrange(desc(yearID))
salary_games_info %>% filter(yearID > 1986 & yearID <= 2000) %>% arrange(desc(yearID), salary)
##############################################################
##############################################################
######################## GROUP_BY ############################
##############################################################
##############################################################
salary_games_info %>%
group_by(playerID) %>%
summarize(count=n())
salary_games_info %>%
group_by(playerID) %>%
summarize(count=n()) %>%
arrange(desc(count))
salary_games_info %>%
group_by(playerID) %>%
summarize(numYearsPlayed = length(unique(yearID)), count=n())
salary_games_info %>%
group_by(playerID) %>%
arrange(yearID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearID>1985)
##############################################################
##############################################################
######################### MUTATE #############################
##############################################################
##############################################################
salary_games_info %>% mutate(sqrt_games = sqrt(G))
salary_games_info %>% mutate(atbats_per_game = AB/G)
#starting to look at pipelines
library(tidyverse)
package.install(tidyverse)
install.packages(tidyverse)
install.packages(tidyverse)
install.package(tidyverse)
salary_games_info %>%
group_by(playerID) %>%
summarize(count=n())
salary_games_info <- read_csv('Lect2data.csv')
library(tidyverse)
salary_games_info <- read_csv('Lect2data.csv')
salary_games_info <- read_csv('Lect2data.csv')
salary_games_info <- read_csv('Lect2data.csv')
#starting to look at pipelines
library(tidyverse)
salary_games_info <- read_csv('Lect2data.csv')
setwd("/Users/maxryoo/Documents/Spring 2019/STAT4310")
salary_games_info <- read_csv('Lect2data.csv')
salary_games_info %>% filter(yearID > 2000 & yearID <= 2010) %>% group_by(teamID) %>% group_by(playerID) %>%
summarize(Median=median(salary))
salary_games_info %>% filter(yearID > 2000
salary_games_info %>% filter(yearID > 2000 & yearID <= 2010)
salary_games_info %>% filter(yearID > 2000 & yearID <= 2010)
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010)
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(teamID)
thing = salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(teamID)
print(thing)
print(thing[2])
thing = salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(teamID)
salary_games_info <- read_csv('Lect2data.csv')
salary_games_info <- read_csv('Lect2data.csv')
head(salary_games_info)
list= [1,2,3]
list= c(1,2,3,4)
list %>% length()
list = c(1,2,3,4)
length(list)
list %>% length()
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(teamID)
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID)
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>% group_by(teamID) %>%
mutat(team_average = mean(per_player_median))
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>% group_by(teamID) %>% mutat(team_average = mean(per_player_median))
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>% group_by(teamID) %>% mutate(team_average = mean(per_player_median))
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>% group_by(teamID) %>% mutate(team_average = mean(per_player_median))
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>% group_by(teamID) %>% mutate(team_average = mean(per_player_median))
lag?
##############################################################
##############################################################
######################### MUTATE #############################
##############################################################
##############################################################
salary_games_info %>% mutate(sqrt_games = sqrt(G))
?lag
help(lag)
salary_games_info %>%
group_by(playerID) %>%
arrange(yearID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearID>1985)
salary_games_info %>% group_by(playerID) %>% arrange(yearID) %>% mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% group_by(playerID) %>% arrange(yearID) %>% mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearID>1985)
salary_games_info %>% group_by(playerID) %>% arrange(yearID)
salary_games_info %>% group_by(playerID)
salary_games_info %>% arrange(playerID)
salary_games_info %>% arrange(playerID) %>% arrange(yearID)
salary_games_info %>% arrange(playerID, yearID)
salary_games_info %>% arrange(yearID, playerID)
playerID, yearID
salary_games_info %>% arrange(playerID, yearID)
salary_games_info %>% arrange(playerID, yearID)
salary_games_info %>% arrange(playerID, yearID) %>% mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>% mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>% summarize(count=n())
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>% mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID)
salary_games_info %>%
group_by(playerID) %>%
arrange(yearID) %>%
mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>%
group_by(playerID) %>%
arrange(desc(yearID)) %>%
mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>%
group_by(playerID) %>%
arrange(yearID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearID>1985)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>% mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>% mutate(yearContinuity = yearID - lag(yearID)) %>% summarize(count=n())
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
summarize(count=n(yearContinuity == 1) + 1)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
summarize(count=n())
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearContinuity == 1) %>% summarize(count=n())
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearContinuity == 1) %>% summarize(count=n() + 1)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearContinuity == 1) %>% summarize(count=n() + 1)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearContinuity == 1) %>% summarize(count=n() + 1)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID))
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearContinuity == 1 ) %>% summarize(count=n() + 1)
salary_games_info %>% arrange(playerID, yearID) %>% group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>% filter(yearContinuity == 1 ) %>% summarize(count=n() + 1)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1) %>% mean(count)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1) %>% group_by(count) %>% mean()
summarize(count=n() + 1) %>% group_by(count
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1) %>% group_by(count)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1) %>% sum()
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1) %>% colSums()
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == 1 ) %>%
summarize(count=n() + 1) %>% mean(count)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity == "N/A" )
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity >0)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>% mean(yearContinuity)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>% summarize(average_yearcont=mean(yearContinuity))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>% summarize(average_yearcont=mean(yearContinuity))
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>% group_by(teamID) %>% mutate(team_average = mean(per_player_median))
salary_games_info %>%
#Groupwork Question 2
# Calculate the average year continuity across everybody in baseball in the dataset.
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity))
salary_games_info %>%
#Groupwork Question 2
# Calculate the average year continuity across everybody in baseball in the dataset.
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity)) %>%
summarize(avg = mean(average_yearcont))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity)) %>%
summarize(avg = mean(average_yearcont))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity >= 0) %>%
summarize(average_yearcont=mean(yearContinuity)) %>%
summarize(avg = mean(average_yearcont))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity)) %>%
summarize(avg = mean(average_yearcont))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity)) %>%
summarize(avg = mean(average_yearcont))
salary_games_info %>% filter(yearID >= 2000 & yearID <= 2010) %>% group_by(teamID) %>% group_by(playerID) %>%
summarize(Median=median(salary))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>% arrange(desc(yearContinuity))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>% arrange(yearContinuity)
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity)) %>%
summarize(avg = mean(average_yearcont))
salary_games_info %>%
arrange(playerID, yearID) %>%
group_by(playerID) %>%
mutate(yearContinuity = yearID - lag(yearID)) %>%
filter(yearContinuity > 0) %>%
summarize(average_yearcont=mean(yearContinuity))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
mutate(team_average = mean(per_player_median))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == BAL)
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID)
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(teamID, playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(teamID, playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(teamID, playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(playerID, teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
playerID
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(teamID, playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(playerID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(teamID, playerID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(teamID, playerID)
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID)
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary))
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID, playerID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
salary_games_info %>%
filter(yearID >= 2000 & yearID <= 2010) %>%
group_by(playerID, teamID) %>%
mutate(per_player_median = median(salary)) %>%
group_by(teamID) %>%
mutate(team_average = mean(per_player_median)) %>% filter(teamID == "BAL")
